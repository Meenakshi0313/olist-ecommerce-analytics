/*
===============================================================================
DDL Script: Create Bronze Tables
===============================================================================
Script Purpose:
    This script creates tables in the 'bronze' schema, dropping existing tables 
    if they already exist.
	  Run this script to re-define the DDL structure of 'bronze' Tables
===============================================================================
*/

IF OBJECT_ID('bronze.olist_customers_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_customers_dataset;
GO

CREATE TABLE bronze.olist_customers_dataset (
            customer_id               NVARCHAR(50),
            customer_unique_id        NVARCHAR(50),
            customer_zip_code_prefix  NVARCHAR(10),
            customer_city             NVARCHAR(100),
            customer_state            CHAR(2)

);
GO


IF OBJECT_ID('bronze.olist_geolocation_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_geolocation_dataset;
GO

CREATE TABLE bronze.olist_geolocation_dataset (
           geolocation_zip_code_prefix  NVARCHAR(10),
           geolocation_lat              DECIMAL(11,8),
           geolocation_lng              DECIMAL(11,8),
           geolocation_city             NVARCHAR(100),
           geolocation_state            CHAR(2)
);
GO


IF OBJECT_ID('bronze.olist_order_items_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_order_items_dataset;
GO

CREATE TABLE bronze.olist_order_items_dataset (
            order_id            NVARCHAR(50),
            order_item_id       INT,
            product_id          NVARCHAR(50),
            seller_id           NVARCHAR(50),
            shipping_limit_date NVARCHAR(30),
            price               DECIMAL(10,2),
            freight_value       DECIMAL(10,2)

);
GO


IF OBJECT_ID('bronze.olist_order_payments_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_order_payments_dataset;
GO

CREATE TABLE bronze.olist_order_payments_dataset (
           order_id              NVARCHAR(50),
           payment_sequential    INT,
           payment_type          NVARCHAR(50),
           payment_installments  INT,
           payment_value         DECIMAL(10,2)
);
GO


IF OBJECT_ID('bronze.olist_order_reviews_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_order_reviews_dataset;
GO

CREATE TABLE bronze.olist_order_reviews_dataset
(
    review_id               NVARCHAR(100) ,
    order_id                NVARCHAR(100) ,
    review_score            NVARCHAR(10) ,
    review_comment_title    NVARCHAR(MAX) NULL,
    review_comment_message  NVARCHAR(MAX) NULL,
    review_creation_date    NVARCHAR(50),
    review_answer_timestamp NVARCHAR(50) 
);


IF OBJECT_ID('bronze.olist_orders_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_orders_dataset;
GO

CREATE TABLE bronze.olist_orders_dataset (
            order_id                       NVARCHAR(50),
            customer_id                    NVARCHAR(50),
            order_status                   NVARCHAR(20),
            order_purchase_timestamp       NVARCHAR(30),
            order_approved_at              NVARCHAR(30),
            order_delivered_carrier_date   NVARCHAR(30),
            order_delivered_customer_date  NVARCHAR(30),
            order_estimated_delivery_date  NVARCHAR(30)
   
);
GO


IF OBJECT_ID('bronze.olist_products_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_products_dataset;
GO

CREATE TABLE bronze.olist_products_dataset (
            product_id                   NVARCHAR(50),
            product_category_name        NVARCHAR(100),
            product_name_lenght          INT,
            product_description_lenght   INT,
            product_photos_qty           INT,
            product_weight_g             DECIMAL(10,2),
            product_length_cm            DECIMAL(10,2),
            product_height_cm            DECIMAL(10,2),
            product_width_cm             DECIMAL(10,2)
);
GO


IF OBJECT_ID('bronze.olist_sellers_dataset', 'U') IS NOT NULL
    DROP TABLE bronze.olist_sellers_dataset;
GO

CREATE TABLE bronze.olist_sellers_dataset (
            seller_id               NVARCHAR(50),
            seller_zip_code_prefix  NVARCHAR(10),
            seller_city             NVARCHAR(100),
            seller_state            CHAR(2)
);
GO


IF OBJECT_ID('bronze.product_category_name_translation', 'U') IS NOT NULL
    DROP TABLE bronze.product_category_name_translation;
GO

CREATE TABLE bronze.product_category_name_translation (
             product_category_name          NVARCHAR(100),
             product_category_name_english  NVARCHAR(100)
    );
GO
